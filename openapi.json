{
    "openapi": "3.0.0",
    "paths": {
        "/api/v1/scrapers-manual-rerun": {
            "post": {
                "operationId": "ScraperManualRerunController_rerun",
                "parameters": [
                    {
                        "name": "accept",
                        "in": "header",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": ["application/json"]
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ScraperRerunRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Scraper rerun completed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ScraperRerunResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API token",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error401Response"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - Insufficient permissions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error403Response"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found - Scraper not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error404Response"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Unprocessable Entity - Invalid request parameters",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error422Response"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error500Response"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearer": []
                    }
                ],
                "tags": [
                    "/scrapers-manual-rerun"
                ]
            }
        },
        "/api/v1/scrapers-ai-rerun": {
            "post": {
                "operationId": "ScraperAiRerunController_rerun",
                "parameters": [
                    {
                        "name": "accept",
                        "in": "header",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": ["application/json"]
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ScraperRerunRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Scraper rerun completed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ScraperRerunResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API token",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error401Response"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - Insufficient permissions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error403Response"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found - Scraper not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error404Response"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Unprocessable Entity - Invalid request parameters",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error422Response"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error500Response"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearer": []
                    }
                ],
                "tags": [
                    "/scrapers-ai-rerun"
                ]
            }
        },
        "/api/v1/results": {
            "get": {
                "operationId": "ResultCrudController_fetch",
                "parameters": [
                    {
                        "name": "sortField",
                        "required": true,
                        "in": "query",
                        "description": "Sort entity by field name",
                        "schema": {
                            "example": "updatedAt",
                            "type": "string"
                        }
                    },
                    {
                        "name": "sortOrder",
                        "required": true,
                        "in": "query",
                        "description": "ASC || DESC",
                        "schema": {
                            "example": "DESC",
                            "type": "string"
                        }
                    },
                    {
                        "name": "pageSize",
                        "required": true,
                        "in": "query",
                        "description": "Number of entities in one page",
                        "schema": {
                            "example": 10,
                            "type": "number"
                        }
                    },
                    {
                        "name": "page",
                        "required": true,
                        "in": "query",
                        "description": "The page where you are",
                        "schema": {
                            "example": 1,
                            "type": "number"
                        }
                    },
                    {
                        "name": "search",
                        "required": false,
                        "in": "query",
                        "description": "Search all entity column value",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "dateRangeColumn",
                        "required": false,
                        "in": "query",
                        "description": "Column name for filter startAt and endAt",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "startAt",
                        "required": false,
                        "in": "query",
                        "description": "Filter startAt by dateRangeColumn",
                        "schema": {
                            "example": "2025-11-13T02:46:49.014Z",
                            "type": "string"
                        }
                    },
                    {
                        "name": "endAt",
                        "required": false,
                        "in": "query",
                        "description": "Filter endAt by dateRangeColumn",
                        "schema": {
                            "example": "2025-11-14T02:46:49.014Z",
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful fetch",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ResultFetchResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API token",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error401Response"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - Insufficient permissions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error403Response"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Unprocessable Entity - Invalid query parameters",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error422Response"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error500Response"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearer": []
                    }
                ],
                "tags": [
                    "/results"
                ]
            }
        },
        "/api/v1/results/{id}": {
            "get": {
                "operationId": "ResultCrudController_read",
                "parameters": [
                    {
                        "name": "id",
                        "required": true,
                        "in": "path",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful fetch",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ResultReadResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing API token",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error401Response"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden - Insufficient permissions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error403Response"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found - Result not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error404Response"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Error500Response"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearer": []
                    }
                ],
                "tags": [
                    "/results"
                ]
            }
        }
    },
    "info": {
        "title": "mrscraper",
        "description": "",
        "version": "1.0.0",
        "contact": {}
    },
    "tags": [],
    "servers": [
        {
            "url": "https://api.v3.app.mrscraper.com",
            "description": "Production API Server"
        }
    ],
    "components": {
        "securitySchemes": {
            "bearer": {
                "type": "apiKey",
                "in": "header",
                "name": "x-api-token"
            }
        },
        "schemas": {
            "ScraperRerunRequest": {
                "type": "object",
                "properties": {
                    "scraperId": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Unique identifier of the scraper to rerun"
                    },
                    "url": {
                        "type": "string",
                        "format": "uri",
                        "description": "URL to scrape"
                    }
                },
                "required": ["scraperId", "url"]
            },
            "ScraperRerunResponse": {
                "type": "object",
                "properties": {
                    "success": {
                        "type": "boolean",
                        "description": "Indicates if the scraping operation was successful"
                    },
                    "data": {
                        "type": "object",
                        "description": "Scraped data object with dynamic properties based on extraction",
                        "additionalProperties": true
                    },
                    "html_path": {
                        "type": "string",
                        "description": "Local path to the saved HTML file"
                    },
                    "token_usage": {
                        "type": "integer",
                        "description": "Number of tokens used for this scraping operation"
                    },
                    "status": {
                        "type": "string",
                        "enum": ["completed", "failed", "pending"],
                        "description": "Status of the scraping operation"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error message if the operation failed, empty string if successful"
                    },
                    "screenshot_path": {
                        "type": "string",
                        "description": "Local path to the saved screenshot"
                    },
                    "screenshot_url": {
                        "type": "string",
                        "format": "uri",
                        "description": "Pre-signed URL to access the screenshot"
                    }
                },
                "required": ["success", "status"]
            },
            "ResultCreateRequest": {
                "type": "object",
                "properties": {
                    "userId": {
                        "type": "string",
                        "nullable": true,
                        "format": "uuid"
                    },
                    "scraperId": {
                        "type": "string",
                        "nullable": true,
                        "format": "uuid"
                    },
                    "type": {
                        "type": "string",
                        "example": "Manual"
                    },
                    "url": {
                        "type": "string",
                        "nullable": true,
                        "example": "https://example.com"
                    },
                    "status": {
                        "type": "string",
                        "nullable": true,
                        "example": "completed"
                    },
                    "error": {
                        "type": "object",
                        "nullable": true,
                        "example": "Timeout error"
                    },
                    "tokenUsage": {
                        "type": "number",
                        "nullable": true,
                        "example": 150
                    },
                    "runtime": {
                        "type": "number",
                        "nullable": true,
                        "example": 1.234
                    },
                    "data": {
                        "type": "object",
                        "nullable": true,
                        "description": "Arbitrary JSON/text payload",
                        "example": "{\"result\":\"ok\"}"
                    },
                    "htmlPath": {
                        "type": "object",
                        "nullable": true,
                        "example": "/path/to/html/file.html"
                    },
                    "recordingPath": {
                        "type": "object",
                        "nullable": true,
                        "example": "/path/to/recording.mp4"
                    },
                    "screenshotPath": {
                        "type": "object",
                        "nullable": true,
                        "example": "/path/to/screenshot.png"
                    },
                    "dataPath": {
                        "type": "object",
                        "nullable": true,
                        "example": "/path/to/data.json"
                    }
                }
            },
            "ResultUpdateRequest": {
                "type": "object",
                "properties": {
                    "userId": {
                        "type": "string",
                        "nullable": true,
                        "format": "uuid"
                    },
                    "scraperId": {
                        "type": "string",
                        "nullable": true,
                        "format": "uuid"
                    },
                    "type": {
                        "type": "string",
                        "example": "Manual"
                    },
                    "url": {
                        "type": "string",
                        "nullable": true,
                        "example": "https://example.com"
                    },
                    "status": {
                        "type": "string",
                        "nullable": true,
                        "example": "completed"
                    },
                    "error": {
                        "type": "object",
                        "nullable": true,
                        "example": "Timeout error"
                    },
                    "tokenUsage": {
                        "type": "number",
                        "nullable": true,
                        "example": 150
                    },
                    "runtime": {
                        "type": "number",
                        "nullable": true,
                        "example": 1.234
                    },
                    "data": {
                        "type": "object",
                        "nullable": true,
                        "description": "Arbitrary JSON/text payload",
                        "example": "{\"result\":\"ok\"}"
                    },
                    "htmlPath": {
                        "type": "object",
                        "nullable": true,
                        "example": "/path/to/html/file.html"
                    },
                    "recordingPath": {
                        "type": "object",
                        "nullable": true,
                        "example": "/path/to/recording.mp4"
                    },
                    "screenshotPath": {
                        "type": "object",
                        "nullable": true,
                        "example": "/path/to/screenshot.png"
                    },
                    "dataPath": {
                        "type": "object",
                        "nullable": true,
                        "example": "/path/to/data.json"
                    }
                }
            },
            "ResultData": {
                "type": "object",
                "properties": {
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-11T09:50:09.722Z"
                    },
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "userId": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "scraperId": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "type": {
                        "type": "string",
                        "example": "AI"
                    },
                    "url": {
                        "type": "string",
                        "format": "uri"
                    },
                    "status": {
                        "type": "string",
                        "example": "Finished"
                    },
                    "error": {
                        "type": "string",
                        "nullable": true
                    },
                    "tokenUsage": {
                        "type": "number",
                        "example": 5
                    },
                    "runtime": {
                        "type": "number",
                        "nullable": true
                    },
                    "data": {
                        "type": "string",
                        "description": "JSON string containing scraped data"
                    },
                    "htmlPath": {
                        "type": "string",
                        "nullable": true
                    },
                    "recordingPath": {
                        "type": "string",
                        "nullable": true
                    },
                    "screenshotPath": {
                        "type": "string",
                        "nullable": true
                    },
                    "dataPath": {
                        "type": "string",
                        "nullable": true
                    }
                }
            },
            "ResultFetchResponse": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Successful fetch"
                    },
                    "data": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ResultData"
                        }
                    },
                    "meta": {
                        "type": "object",
                        "properties": {
                            "page": {
                                "type": "number",
                                "example": 1
                            },
                            "pageSize": {
                                "type": "number",
                                "example": 10
                            },
                            "total": {
                                "type": "number",
                                "example": 1
                            },
                            "totalPage": {
                                "type": "number",
                                "example": 1
                            }
                        }
                    }
                }
            },
            "ResultReadResponse": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Successful fetch"
                    },
                    "data": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ResultData"
                        }
                    }
                }
            },
            "ErrorResponse": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "description": "Error message describing what went wrong",
                        "example": "Error message here"
                    },
                    "error": {
                        "type": "string",
                        "description": "Error type or code",
                        "example": "SomeErrorType"
                    },
                    "statusCode": {
                        "type": "number",
                        "description": "HTTP status code",
                        "example": 400
                    }
                },
                "required": ["message", "statusCode"]
            },
            "Error401Response": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Invalid or missing API token"
                    },
                    "error": {
                        "type": "string",
                        "example": "Unauthorized"
                    },
                    "statusCode": {
                        "type": "number",
                        "example": 401
                    }
                }
            },
            "Error403Response": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "You do not have permission to access this resource"
                    },
                    "error": {
                        "type": "string",
                        "example": "Forbidden"
                    },
                    "statusCode": {
                        "type": "number",
                        "example": 403
                    }
                }
            },
            "Error404Response": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Resource not found"
                    },
                    "error": {
                        "type": "string",
                        "example": "Not Found"
                    },
                    "statusCode": {
                        "type": "number",
                        "example": 404
                    }
                }
            },
            "Error422Response": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "Validation failed"
                    },
                    "error": {
                        "type": "string",
                        "example": "Unprocessable Entity"
                    },
                    "statusCode": {
                        "type": "number",
                        "example": 422
                    }
                }
            },
            "Error500Response": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "An unexpected error occurred"
                    },
                    "error": {
                        "type": "string",
                        "example": "Internal Server Error"
                    },
                    "statusCode": {
                        "type": "number",
                        "example": 500
                    }
                }
            }
        }
    }
}